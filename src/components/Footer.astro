---
import { Image } from 'astro:assets';
import logoSrc from '../assets/logo.png';
import Icon from './Icon.astro';

const social = [
  { href: 'https://www.linkedin.com/in/gonzaloromero-/', icon: 'linkedin', label: 'LinkedIn' },
  { href: 'https://github.com/Elotickk', icon: 'github', label: 'GitHub' },
  { href: 'https://www.instagram.com/gonza.romer0/', icon: 'instagram', label: 'Instagram' },
  { href: 'https://www.facebook.com/gonzalo.romero.35110/', icon: 'facebook', label: 'Facebook' },
];

const year = new Date().getFullYear();
---

<footer class="bg-gray-50 dark:bg-surface-dark-card border-t border-gray-200 dark:border-surface-dark-border py-10">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">

    <div class="flex flex-col items-center gap-6">

      <!-- Brand -->
      <a href="#home" aria-label="Inicio">
        <Image
          src={logoSrc}
          alt="Gonzalo Romero"
          width={140}
          height={112}
          format="webp"
          quality={90}
          class="h-14 w-auto object-contain"
        />
      </a>

      <!-- Social links -->
      <div class="flex items-center gap-3">
        {social.map(({ href, icon, label }) => (
          <a
            href={href}
            target="_blank"
            rel="noopener noreferrer"
            aria-label={label}
            class="w-10 h-10 flex items-center justify-center rounded-xl
                   text-gray-500 dark:text-gray-400
                   hover:text-white hover:bg-accent
                   border border-gray-300 dark:border-gray-600 hover:border-accent
                   transition-all duration-300"
          >
            <Icon name={icon} class="text-lg inline-block" />
          </a>
        ))}
      </div>

      <!-- Nav links -->
      <nav class="flex flex-wrap justify-center gap-x-6 gap-y-1">
        {['#home', '#about', '#education', '#portfolio', '#contact'].map((href, i) => {
          const labels = ['Inicio', 'Sobre mí', 'Educación', 'Proyectos', 'Contacto'];
          return (
            <a
              href={href}
              class="text-sm text-gray-500 dark:text-gray-400 hover:text-accent dark:hover:text-accent transition-colors"
            >
              {labels[i]}
            </a>
          );
        })}
      </nav>

      <!-- Copyright -->
      <p class="text-xs text-gray-400 dark:text-gray-600 text-center">
        &copy; {year} Gonzalo Romero · Hecho con
        <span class="text-accent font-medium">Astro</span> &amp; Tailwind CSS
      </p>

    </div>

    <!-- Back to top -->
    <a
      href="#home"
      aria-label="Volver arriba"
      class="fixed bottom-6 right-6 w-11 h-11 flex items-center justify-center
             rounded-xl bg-accent text-white shadow-lg shadow-accent/40
             hover:bg-accent-dark hover:-translate-y-1
             transition-all duration-300 opacity-0 pointer-events-none"
      id="back-to-top"
    >
      <Icon name="arrow-up" class="text-xl inline-block" />
    </a>
  </div>
</footer>

<script>
  const backToTop = document.getElementById('back-to-top');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 400) {
      backToTop!.classList.remove('opacity-0', 'pointer-events-none');
      backToTop!.classList.add('opacity-100');
    } else {
      backToTop!.classList.add('opacity-0', 'pointer-events-none');
      backToTop!.classList.remove('opacity-100');
    }
  }, { passive: true });
</script>
